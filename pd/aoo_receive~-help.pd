#N canvas 1070 79 657 638 12;
#X declare -lib aoo;
#X text 276 308 creation arguments:;
#N canvas 961 0 712 906 events 0;
#X obj 37 32 inlet;
#X text 63 144 a source has been added;
#X obj 37 85 outlet;
#X msg 38 219 invite_timeout <host> <port> <ID>;
#X text 64 243 an invite request for the given source has timed out;
#X text 101 569 the stream has been stopped;
#X text 103 487 a new stream has been started., f 32;
#X text 103 507 'type' and 'data' are the (optional) stream metadata \, see [pd metadata] in [aoo_send~], f 45;
#X obj 115 60 tgl 15 0 \$0-ping \$0-ping empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X text 138 58 post pings;
#N canvas 899 257 365 267 route 0;
#X obj 83 58 inlet;
#X obj 83 161 outlet;
#N canvas 981 333 450 438 filter 0;
#X obj 58 52 inlet;
#X obj 130 302 outlet;
#X obj 58 83 t a a;
#X obj 58 333 list prepend event;
#X obj 58 363 list trim;
#X obj 90 113 list split 3;
#X obj 58 301 spigot;
#X obj 130 231 t b b;
#X obj 162 269 f;
#X msg 97 268 1;
#X text 196 203 filter ping events;
#X obj 58 393 print aoo_receive~;
#X obj 180 244 r \$0-ping;
#X obj 130 201 sel ping;
#X obj 130 140 t s a;
#N canvas 996 172 347 332 metadata 0;
#X obj 56 48 inlet;
#X obj 56 169 oscparse;
#X obj 99 202 fudiparse;
#X obj 56 292 print aoo_receive~;
#X obj 56 235 list prepend metadata;
#X obj 56 263 list trim;
#X obj 56 75 list trim;
#X obj 56 107 route start;
#X obj 56 139 route osc fudi bang;
#X connect 0 0 6 0;
#X connect 1 0 4 0;
#X connect 2 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 3 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 1 0;
#X connect 8 1 2 0;
#X connect 8 3 4 0;
#X restore 162 169 pd metadata;
#X connect 0 0 2 0;
#X connect 2 0 6 0;
#X connect 2 1 5 0;
#X connect 3 0 4 0;
#X connect 4 0 11 0;
#X connect 5 1 14 0;
#X connect 6 0 3 0;
#X connect 7 0 1 0;
#X connect 7 1 8 0;
#X connect 8 0 6 1;
#X connect 9 0 6 1;
#X connect 12 0 8 1;
#X connect 13 0 7 0;
#X connect 13 1 9 0;
#X connect 14 0 13 0;
#X connect 14 1 15 0;
#X restore 83 130 pd filter;
#X obj 206 128 print aoo_receive~;
#X obj 83 98 route source_event;
#X connect 0 0 4 0;
#X connect 2 0 1 0;
#X connect 4 0 2 0;
#X connect 4 1 3 0;
#X restore 37 59 pd route;
#X f 9;
#X msg 38 122 add <host> <port> <ID>;
#X msg 38 170 remove <host> <port> <ID>;
#X text 65 192 a source has been removed;
#X msg 40 271 uninvite_timeout <host> <port> <ID>;
#X text 66 295 an uninvite request for the given source has timed out;
#X text 40 402 source events:;
#X msg 68 463 ... start [<type> <data...>];
#X msg 69 546 ... stop;
#X msg 69 598 ... state <state>;
#X msg 68 690 ... format <codec> <channels> <blocksize> <sr> ..., f 53;
#X text 72 1401 ---;
#X msg 68 1279 ... block_resent <count>;
#X msg 69 1335 ... block_dropped <count>;
#X msg 68 1075 ... overrun;
#X msg 68 1147 ... underrun;
#X msg 66 882 ... ping <delta1> <delta2> <rtt>;
#X text 105 1010 NOTE: The roundtrip time is not necessarily the same as the sum of the deltas \, especially if the clocks are not perfectly in sync. If one clock runs significantly early or late \, the deltas can even be negative!, f 73;
#X text 104 989 <rtt> is the approx. roundtrip time (in ms) \, as measured on the source., f 71;
#X text 97 1099 jitter buffer overrun. If this happens repeatedly \, try to increase the latency., f 50;
#X text 96 1175 jitter buffer underrun. If this happens repeatedly \, try to increase the latency., f 51;
#X text 104 948 <delta1> is the approx. delay between sink and source (in ms), f 62;
#X text 104 969 <delta2> is the approx. delay between sink and source (in ms), f 62;
#X text 102 911 A periodic message exchanged between sink and source that may be used for network latency estimation., f 71;
#X msg 42 429 source_event <host> <port> <ID> ...;
#X text 101 622 the source has change its state (0: idle \, 1: active \, 2: buffering), f 67;
#X text 104 718 the source format has changed \, see [pd format ...] in [aoo_send~], f 66;
#X msg 68 1224 ... block_xrun <count>;
#X text 100 1251 empty blocks because of source xrun;
#X text 99 1363 blocks have been dropped because they did not arrive. typically caused by jitter or packet loss.;
#X text 100 1306 blocks have been successfully resent;
#X msg 67 747 ... time <delta>;
#X text 100 803 NB: The delta may be negative!;
#X text 99 771 stream time stamp. The delta is relative to the time when the AOO library has been loaded \, so all AOO objects share the same time base., f 70;
#X text 101 849 HINT: this event may be used to align multiple independent streams., f 68;
#X msg 40 325 msg <host> <port> <ID> <channel> <type> <data...>;
#X text 67 351 a stream message from a particular source. See [pd message] in [aoo_send~]., f 75;
#X text 66 371 NB: this event is scheduled sample accurately \, albeit with one block delay., f 76;
#X text 103 643 NB: this event is scheduled sample accurately \, albeit with a one block delay., f 77;
#X text 100 823 NB: this event is scheduled sample accurately \, albeit with a one block delay., f 77;
#X connect 0 0 10 0;
#X connect 10 0 2 0;
#X restore 182 377 pd events;
#X text 35 24 aoo_receive~: receive one or more AoO audio streams;
#X msg 516 545 \; pd dsp \$1;
#X obj 516 522 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X msg 79 201 list_sources;
#X text 179 192 list sources. This will output a message [source <host> <port> <id>( for each source., f 45;
#X obj 474 24 declare -lib aoo;
#X msg 38 64 invite localhost 9998 1;
#X text 216 64 invite an AoO source (hostname \, port \, source ID);
#X msg 46 98 uninvite localhost 9998 1;
#X text 236 97 uninvite an AoO source (hostname \, port \, source ID);
#X text 33 441 another sink on the same port;
#X obj 36 492 env~;
#X floatatom 36 516 5 0 0 0 - - - 0;
#X obj 107 493 env~;
#X floatatom 107 517 5 0 0 0 - - - 0;
#X text 199 498 the same port can also be used by sources;
#X msg 58 130 uninvite;
#X text 129 129 uninvite all AoO sources;
#N canvas 1246 92 571 804 advanced 0;
#X obj 39 760 outlet;
#X msg 123 588 packetsize \$1;
#X text 229 586 max. UDP packet size (default: 512 bytes);
#X msg 75 252 reset;
#X text 132 245 reset all sources (e.g. if the stream seems to be broken or out of sync), f 47;
#X text 250 286 reset individual source;
#X msg 81 285 reset localhost 9998 1;
#X msg 99 28 0;
#X text 133 28 stop listening;
#X msg 39 53 port \$1;
#X text 101 53 change receive port;
#X msg 49 105 id \$1;
#X text 103 104 change AoO sink ID;
#X msg 103 421 resend \$1;
#X msg 108 476 resend_limit \$1;
#X msg 114 527 resend_interval \$1;
#X text 232 476 max. number of frames to request per message (default: 16), f 34;
#X text 252 525 time interval (ms) between resend requests (default: 10 ms), f 34;
#X text 184 415 enable/disable resending of lost packets (enabled by default), f 40;
#X text 100 372 packet resending:;
#X text 278 189 get the current buffer fill ratio of the given source, f 27;
#X text 279 222 0: empty \, 1: full;
#X msg 69 195 fill_ratio localhost 9998 1;
#X msg 129 649 dynamic_resampling \$1;
#X msg 139 700 dll_bandwidth \$1;
#X text 267 685 time DLL filter bandwidth for dynamic resampling (default: 0.0001), f 38;
#X msg 62 157 ping \$1;
#X text 128 157 set ping interval in ms (default: 1000) \, 0 = off;
#X text 292 634 enable/disable dynamic resampling (off by default), f 34;
#X msg 151 757 binary \$1;
#X obj 151 732 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X text 232 745 enable/disable binary message format (on by default), f 36;
#X floatatom 39 26 5 0 0 0 - - - 0;
#X floatatom 49 82 5 0 0 0 - - - 0;
#X floatatom 62 133 5 0 0 0 - - - 0;
#X obj 103 397 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X floatatom 108 451 5 0 0 0 - - - 0;
#X floatatom 114 504 5 0 0 0 - - - 0;
#X floatatom 123 563 6 0 0 0 - - - 0;
#X obj 129 623 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X floatatom 139 675 8 0 0 0 - - - 0;
#X msg 90 342 buffersize \$1;
#X floatatom 90 318 6 0 0 0 - - - 0;
#X text 202 322 actual jitter buffer size (in ms).;
#X text 203 344 0 = automatic (2 * latency).;
#X connect 1 0 0 0;
#X connect 3 0 0 0;
#X connect 6 0 0 0;
#X connect 7 0 9 0;
#X connect 9 0 0 0;
#X connect 11 0 0 0;
#X connect 13 0 0 0;
#X connect 14 0 0 0;
#X connect 15 0 0 0;
#X connect 22 0 0 0;
#X connect 23 0 0 0;
#X connect 24 0 0 0;
#X connect 26 0 0 0;
#X connect 29 0 0 0;
#X connect 30 0 29 0;
#X connect 32 0 9 0;
#X connect 33 0 11 0;
#X connect 34 0 26 0;
#X connect 35 0 13 0;
#X connect 36 0 14 0;
#X connect 37 0 15 0;
#X connect 38 0 1 0;
#X connect 39 0 23 0;
#X connect 40 0 24 0;
#X connect 41 0 0 0;
#X connect 42 0 41 0;
#X restore 99 295 pd advanced;
#X text 37 562 see also;
#X obj 107 562 aoo_send~;
#X text 174 262 increase for jittery \, unreliable networks!;
#X obj 182 403 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#N canvas 0 50 450 387 output 0;
#X obj 105 188 inlet~;
#X obj 173 191 inlet~;
#X obj 238 100 loadbang;
#X msg 238 124 -100;
#X obj 238 148 s /\$0/master;
#X obj 143 108 nbx 5 14 -100 0 0 0 /\$0/master /\$0/master empty 0 -8 0 10 #fcfcfc #000000 #000000 0 256;
#X obj 201 105 cnv 15 1 1 empty empty dB 0 12 0 14 #fcfcfc #000000 0;
#X obj 105 105 cnv 15 1 1 empty empty Vol: 0 12 0 14 #fcfcfc #000000 0;
#X obj 227 191 r /\$0/master;
#X obj 227 215 + 100;
#X obj 227 239 dbtorms;
#X msg 227 263 \$1 50;
#X obj 227 288 line~;
#X obj 105 322 *~;
#X obj 174 323 *~;
#X obj 104 352 dac~;
#X connect 0 0 13 0;
#X connect 1 0 14 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 13 1;
#X connect 12 0 14 1;
#X connect 13 0 15 0;
#X connect 14 0 15 1;
#X coords 0 -1 1 1 120 30 2 100 100;
#X restore 37 376 pd output;
#X obj 184 562 aoo_client;
#X obj 270 562 aoo_server;
#N canvas 1038 65 499 672 metadata 0;
#X text 39 217 "text": UTF-8 encoded plain text;
#X text 40 238 "json": UTF-8 encoded JSON;
#X text 41 260 "xml": UTF-8 encoded XML;
#X text 42 283 "osc": an OSC message;
#X obj 47 453 oscformat;
#X msg 47 424 set /foo \, 1 2 3;
#X text 30 128 The actual content and its interpretation is user-defined and will be different for each application., f 58;
#X obj 185 451 fudiformat;
#X text 124 453 "osc";
#X text 267 452 "fudi";
#X text 41 307 "fudi": a FUDI message;
#X obj 31 616 s \$0-msg;
#X text 43 351 "raw" or "binary": raw bytes;
#X text 42 330 "midi": a MIDI message;
#X msg 185 423 foo 1 2 3;
#X text 31 35 Users can add stream metadata to the "invite" message to inform the other end about properties like channel layout \, musical information \, etc.;
#X text 30 91 The metadata will be output in the [aoo_send~] object as part of the "invite" event message.;
#X text 30 163 The metadata consists of a "type" symbol \, followed by a list of bytes. "type" can be either a user-defined name or one of the following pre-defined names:;
#X obj 47 511 list prepend invite localhost 9998 1;
#X msg 65 575 uninvite localhost 9998 1;
#X obj 47 539 list trim;
#X obj 47 482 list prepend osc;
#X obj 185 481 list prepend fudi;
#X msg 31 385 invite <host> <port> <id> <type> <data...>;
#X connect 4 0 21 0;
#X connect 5 0 4 0;
#X connect 7 0 22 0;
#X connect 14 0 7 0;
#X connect 18 0 20 0;
#X connect 19 0 11 0;
#X connect 20 0 11 0;
#X connect 21 0 18 0;
#X connect 22 0 18 0;
#X connect 23 0 11 0;
#X restore 69 161 pd metadata;
#X msg 87 262 latency \$1;
#X text 175 241 latency in ms (default: 25 ms);
#X text 277 454 4) latency (default: 25 ms);
#X text 277 334 1) number of channels (default: 1);
#X text 276 381 2) port number for incoming messages;
#X text 276 409 3) sink ID \, must be unique for all [aoo_receive~];
#X text 297 429 instances on the same port;
#X obj 36 467 aoo_receive~ 2 9999 2;
#X obj 202 522 aoo_send~ 2 9999 1;
#X obj 38 350 aoo_receive~ 2 9999 1;
#X text 297 355 HINT: use 0 channels for pure message streams;
#X text 160 161 invitation metadata;
#X floatatom 87 236 6 0 0 0 - - - 0;
#X connect 1 0 24 0;
#X connect 4 0 3 0;
#X connect 5 0 38 0;
#X connect 8 0 38 0;
#X connect 10 0 38 0;
#X connect 13 0 14 0;
#X connect 15 0 16 0;
#X connect 18 0 38 0;
#X connect 20 0 38 0;
#X connect 29 0 38 0;
#X connect 36 0 13 0;
#X connect 36 1 15 0;
#X connect 38 0 25 0;
#X connect 38 1 25 1;
#X connect 38 2 1 0;
#X connect 41 0 29 0;
