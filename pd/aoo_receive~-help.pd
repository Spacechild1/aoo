#N canvas 1070 79 657 638 12;
#X declare -lib aoo;
#X text 276 308 creation arguments:;
#N canvas 961 0 712 906 events 0;
#X obj 37 32 inlet;
#X text 63 144 a source has been added;
#X obj 37 85 outlet;
#X msg 38 219 invite_timeout <host> <port> <ID>;
#X text 64 243 an invite request for the given source has timed out;
#X text 71 421 the stream has been stopped;
#X obj 115 59 tgl 19 0 \$0-ping \$0-ping empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X text 140 59 post pings;
#N canvas 518 262 811 433 route 0;
#X obj 83 58 inlet;
#X obj 83 264 outlet;
#X obj 154 117 r \$0-ping;
#X obj 115 145 spigot;
#X obj 83 117 t b a;
#X obj 115 172 list prepend ping;
#X obj 115 204 list trim;
#X text 167 145 filter pings;
#X obj 115 235 print aoo_receive~;
#X obj 319 117 r \$0-time;
#X obj 280 144 spigot;
#X obj 280 172 list prepend time;
#X obj 280 200 list trim;
#X obj 280 228 print aoo_receive~;
#X obj 491 289 route osc fudi, f 20;
#X obj 491 319 oscparse;
#X obj 559 319 fudiparse;
#X obj 491 262 list trim;
#X obj 451 229 list split 3;
#X obj 483 144 print aoo_send~;
#X obj 451 116 t a a;
#X obj 83 88 route ping time, f 53;
#X text 466 174 parse stream metadata and stream messages;
#X obj 451 202 route start msg, f 28;
#X obj 491 347 print DATA;
#X obj 547 230 list split 4;
#X connect 0 0 21 0;
#X connect 2 0 3 1;
#X connect 3 0 5 0;
#X connect 4 0 1 0;
#X connect 4 1 3 0;
#X connect 5 0 6 0;
#X connect 6 0 8 0;
#X connect 9 0 10 1;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 13 0;
#X connect 14 0 15 0;
#X connect 14 1 16 0;
#X connect 15 0 24 0;
#X connect 16 0 24 0;
#X connect 17 0 14 0;
#X connect 18 1 17 0;
#X connect 20 0 23 0;
#X connect 20 1 19 0;
#X connect 21 0 4 0;
#X connect 21 1 10 0;
#X connect 21 2 20 0;
#X connect 23 0 18 0;
#X connect 23 1 25 0;
#X connect 25 1 17 0;
#X restore 37 59 pd route;
#X f 9;
#X msg 38 122 add <host> <port> <ID>;
#X msg 38 170 remove <host> <port> <ID>;
#X text 65 192 a source has been removed;
#X msg 40 271 uninvite_timeout <host> <port> <ID>;
#X text 66 295 an uninvite request for the given source has timed out;
#X text 42 1325 ---;
#X text 75 934 NOTE: The roundtrip time is not necessarily the same as the sum of the deltas \, especially if the clocks are not perfectly in sync. If one clock runs significantly early or late \, the deltas can even be negative!, f 73;
#X text 74 913 <rtt> is the approx. roundtrip time (in ms) \, as measured on the source., f 71;
#X text 67 1023 jitter buffer overrun. If this happens repeatedly \, try to increase the latency., f 50;
#X text 66 1099 jitter buffer underrun. If this happens repeatedly \, try to increase the latency., f 51;
#X text 74 872 <delta1> is the approx. delay between sink and source (in ms), f 62;
#X text 74 893 <delta2> is the approx. delay between sink and source (in ms), f 62;
#X text 72 835 A periodic message exchanged between sink and source that may be used for network latency estimation., f 71;
#X text 71 476 the source has change its state (0: idle \, 1: active \, 2: buffering), f 67;
#X text 74 556 the source format has changed \, see [pd format ...] in [aoo_send~], f 66;
#X text 70 1175 empty blocks because of source xrun;
#X text 69 1287 blocks have been dropped because they did not arrive. typically caused by jitter or packet loss.;
#X text 70 1230 blocks have been successfully resent;
#X text 70 727 NB: The delta may be negative!;
#X text 69 695 stream time stamp. The delta is relative to the time when the AOO library has been loaded \, so all AOO objects share the same time base., f 70;
#X text 71 773 HINT: this event may be used to align multiple independent streams., f 68;
#X msg 38 590 msg <host> <port> <ID> <channel> <type> <data...>;
#X text 65 616 a stream message from a particular source. See [pd message] in [aoo_send~]., f 75;
#X text 64 636 NB: this event is scheduled sample accurately \, albeit with one block delay., f 76;
#X text 73 497 NB: this event is scheduled sample accurately \, albeit with a one block delay., f 77;
#X text 70 747 NB: this event is scheduled sample accurately \, albeit with a one block delay., f 77;
#X msg 38 329 start <host> <port> <ID> [<type> <data...>];
#X text 73 353 a new stream has been started. <type> and <data...> are the (optional) stream metadata \, see [pd metadata] in [aoo_send~]., f 62;
#X msg 38 528 format <codec> <channels> <blocksize> <sr> ..., f 53;
#X msg 39 398 stop <host> <port> <ID>;
#X msg 39 452 state <host> <port> <ID> <state>;
#X msg 37 671 time <host> <port> <ID> <delta>;
#X msg 36 806 ping <host> <port> <ID> <delta1> <delta2> <rtt>;
#X msg 38 999 overrun <host> <port> <ID>;
#X msg 38 1071 underrun <host> <port> <ID>;
#X msg 38 1148 block_xrun <host> <port> <ID> <count>;
#X msg 38 1203 block_resent <host> <port> <ID> <count>;
#X msg 39 1259 block_dropped <host> <port> <ID> <count>;
#X obj 229 60 tgl 19 0 \$0-time \$0-time empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X text 252 60 post stream time;
#X connect 0 0 8 0;
#X connect 8 0 2 0;
#X restore 182 377 pd events;
#X msg 516 545 \; pd dsp \$1;
#X obj 516 522 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X msg 79 201 list_sources;
#X text 179 192 list sources. This will output a message [source <host> <port> <id>( for each source., f 45;
#X obj 474 24 declare -lib aoo;
#X msg 38 64 invite localhost 9998 1;
#X text 216 64 invite an AoO source (hostname \, port \, source ID);
#X msg 46 98 uninvite localhost 9998 1;
#X text 236 97 uninvite an AoO source (hostname \, port \, source ID);
#X text 33 441 another sink on the same port;
#X obj 36 492 env~;
#X floatatom 36 516 5 0 0 0 - - - 0;
#X obj 107 493 env~;
#X floatatom 107 517 5 0 0 0 - - - 0;
#X text 199 498 the same port can also be used by sources;
#X msg 58 130 uninvite;
#N canvas 1177 96 650 858 advanced 0;
#X obj 39 800 outlet;
#X msg 133 628 packetsize \$1;
#X text 239 626 max. UDP packet size (default: 512 bytes);
#X msg 85 282 reset;
#X text 142 275 reset all sources (e.g. if the stream seems to be broken or out of sync), f 47;
#X text 260 326 reset individual source;
#X msg 91 325 reset localhost 9998 1;
#X msg 84 26 0;
#X text 118 26 stop listening;
#X msg 39 53 port \$1;
#X text 101 53 change receive port;
#X msg 49 105 id \$1;
#X msg 113 461 resend \$1;
#X msg 118 516 resend_limit \$1;
#X msg 124 567 resend_interval \$1;
#X text 242 501 max. number of frames to request per message (default: 16), f 34;
#X text 266 557 time interval (ms) between resend requests (default: 10 ms), f 34;
#X text 192 445 enable/disable resending of lost packets (enabled by default), f 40;
#X text 110 412 packet resending:;
#X msg 69 195 fill_ratio localhost 9998 1;
#X msg 139 689 dynamic_resampling \$1;
#X msg 149 740 dll_bandwidth \$1;
#X text 278 730 time DLL filter bandwidth for dynamic resampling (default: 0.0001), f 38;
#X msg 62 157 ping \$1;
#X text 128 157 set ping interval in ms (default: 1000) \, 0 = off;
#X text 302 676 enable/disable dynamic resampling (off by default), f 34;
#X msg 151 797 binary \$1;
#X obj 151 772 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X text 232 785 enable/disable binary message format (on by default), f 36;
#X floatatom 39 26 5 0 0 0 - - - 0;
#X floatatom 49 82 5 0 0 0 - - - 0;
#X floatatom 62 133 5 0 0 0 - - - 0;
#X obj 113 437 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X floatatom 118 491 5 0 0 0 - - - 0;
#X floatatom 124 544 5 0 0 0 - - - 0;
#X floatatom 133 603 6 0 0 0 - - - 0;
#X obj 139 663 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X floatatom 149 715 8 0 0 0 - - - 0;
#X msg 100 382 buffersize \$1;
#X floatatom 100 358 6 0 0 0 - - - 0;
#X text 212 362 actual jitter buffer size (in ms).;
#X text 213 384 0 = automatic (2 * latency).;
#X text 103 104 change AOO sink ID;
#X msg 78 239 fill_ratio;
#X text 274 191 get the current buffer fill ratio of the given source. 0: empty \, 1: full, f 38;
#X text 165 238 get current buffer fill ratio (first/only source);
#X connect 1 0 0 0;
#X connect 3 0 0 0;
#X connect 6 0 0 0;
#X connect 7 0 9 0;
#X connect 9 0 0 0;
#X connect 11 0 0 0;
#X connect 12 0 0 0;
#X connect 13 0 0 0;
#X connect 14 0 0 0;
#X connect 19 0 0 0;
#X connect 20 0 0 0;
#X connect 21 0 0 0;
#X connect 23 0 0 0;
#X connect 26 0 0 0;
#X connect 27 0 26 0;
#X connect 29 0 9 0;
#X connect 30 0 11 0;
#X connect 31 0 23 0;
#X connect 32 0 12 0;
#X connect 33 0 13 0;
#X connect 34 0 14 0;
#X connect 35 0 1 0;
#X connect 36 0 20 0;
#X connect 37 0 21 0;
#X connect 38 0 0 0;
#X connect 39 0 38 0;
#X connect 43 0 0 0;
#X restore 99 295 pd advanced;
#X text 37 562 see also;
#X obj 107 562 aoo_send~;
#X text 174 262 increase for jittery \, unreliable networks!;
#X obj 182 403 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#N canvas 0 50 450 387 output 0;
#X obj 105 188 inlet~;
#X obj 173 191 inlet~;
#X obj 238 100 loadbang;
#X msg 238 124 -100;
#X obj 238 148 s /\$0/master;
#X obj 143 108 nbx 5 14 -100 0 0 0 /\$0/master /\$0/master empty 0 -8 0 10 #fcfcfc #000000 #000000 0 256;
#X obj 201 105 cnv 15 1 1 empty empty dB 0 12 0 14 #fcfcfc #000000 0;
#X obj 105 105 cnv 15 1 1 empty empty Vol: 0 12 0 14 #fcfcfc #000000 0;
#X obj 227 191 r /\$0/master;
#X obj 227 215 + 100;
#X obj 227 239 dbtorms;
#X msg 227 263 \$1 50;
#X obj 227 288 line~;
#X obj 105 322 *~;
#X obj 174 323 *~;
#X obj 104 352 dac~;
#X connect 0 0 13 0;
#X connect 1 0 14 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 13 1;
#X connect 12 0 14 1;
#X connect 13 0 15 0;
#X connect 14 0 15 1;
#X coords 0 -1 1 1 120 30 2 100 100;
#X restore 37 376 pd output;
#X obj 184 562 aoo_client;
#X obj 270 562 aoo_server;
#N canvas 1038 65 499 672 metadata 0;
#X text 39 217 "text": UTF-8 encoded plain text;
#X text 40 238 "json": UTF-8 encoded JSON;
#X text 41 260 "xml": UTF-8 encoded XML;
#X text 42 283 "osc": an OSC message;
#X obj 47 453 oscformat;
#X text 30 128 The actual content and its interpretation is user-defined and will be different for each application., f 58;
#X obj 185 451 fudiformat;
#X text 124 453 "osc";
#X text 267 452 "fudi";
#X text 41 307 "fudi": a FUDI message;
#X text 43 351 "raw" or "binary": raw bytes;
#X text 42 330 "midi": a MIDI message;
#X msg 185 423 foo 1 2 3;
#X text 31 35 Users can add stream metadata to the "invite" message to inform the other end about properties like channel layout \, musical information \, etc.;
#X text 30 91 The metadata will be output in the [aoo_send~] object as part of the "invite" event message.;
#X text 30 163 The metadata consists of a "type" symbol \, followed by a list of bytes. "type" can be either a user-defined name or one of the following pre-defined names:;
#X obj 47 511 list prepend invite localhost 9998 1;
#X msg 65 575 uninvite localhost 9998 1;
#X obj 47 539 list trim;
#X obj 47 482 list prepend osc;
#X obj 185 481 list prepend fudi;
#X msg 31 385 invite <host> <port> <id> <type> <data...>;
#X obj 31 616 outlet;
#X msg 47 424 set foo \, 1 2 3;
#X connect 4 0 19 0;
#X connect 6 0 20 0;
#X connect 12 0 6 0;
#X connect 16 0 18 0;
#X connect 17 0 22 0;
#X connect 18 0 22 0;
#X connect 19 0 16 0;
#X connect 20 0 16 0;
#X connect 21 0 22 0;
#X connect 23 0 4 0;
#X restore 69 161 pd metadata;
#X msg 87 262 latency \$1;
#X text 175 241 latency in ms (default: 25 ms);
#X text 277 454 4) latency (default: 25 ms);
#X text 277 334 1) number of channels (default: 1);
#X text 276 381 2) port number for incoming messages;
#X text 276 409 3) sink ID \, must be unique for all [aoo_receive~];
#X text 297 429 instances on the same port;
#X obj 36 467 aoo_receive~ 2 9999 2;
#X obj 202 522 aoo_send~ 2 9999 1;
#X obj 38 350 aoo_receive~ 2 9999 1;
#X text 297 355 HINT: use 0 channels for pure message streams;
#X text 160 161 invitation metadata;
#X floatatom 87 236 6 0 0 0 - - - 0;
#X text 129 129 uninvite all AOO sources;
#X text 34 23 aoo_receive~: receive one or more AOO audio streams;
#X connect 1 0 22 0;
#X connect 3 0 2 0;
#X connect 4 0 36 0;
#X connect 7 0 36 0;
#X connect 9 0 36 0;
#X connect 12 0 13 0;
#X connect 14 0 15 0;
#X connect 17 0 36 0;
#X connect 18 0 36 0;
#X connect 26 0 36 0;
#X connect 27 0 36 0;
#X connect 34 0 12 0;
#X connect 34 1 14 0;
#X connect 36 0 23 0;
#X connect 36 1 23 1;
#X connect 36 2 1 0;
#X connect 39 0 27 0;
