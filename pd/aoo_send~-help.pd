#N canvas 234 73 682 631 12;
#X declare -lib aoo;
#X text 247 341 creation arguments:;
#N canvas 489 105 551 520 pcm 0;
#X obj 31 463 outlet;
#X msg 256 158 2;
#X msg 267 185 3;
#X msg 273 211 4;
#X msg 279 236 8;
#X obj 256 282 t b f;
#X msg 189 202 44100;
#X msg 196 229 48000;
#X msg 180 177 22050;
#X obj 172 280 t b f;
#X msg 110 178 64;
#X msg 119 203 128;
#X msg 126 228 256;
#X msg 133 254 512;
#X obj 101 156 nbx 5 14 -1e+037 1e+037 0 0 empty empty empty 0 -8 0
10 -262144 -1 -1 0 256;
#X obj 172 157 nbx 5 14 -1e+037 1e+037 0 0 empty empty empty 0 -8 0
10 -262144 -1 -1 0 256;
#X text 299 158 16-bit integer;
#X text 306 184 24-bit integer;
#X text 317 236 64-bit float;
#X text 97 134 blocksize;
#X text 172 134 samplerate;
#X text 128 401 all arguments are optional!;
#X msg 41 401 format pcm;
#X text 255 133 bitdepth;
#X text 311 211 32-bit float (default);
#X text 246 434 individual arguments can be "auto";
#X obj 31 156 nbx 5 14 -1e+037 1e+037 0 0 empty empty empty 0 -8 0
10 -262144 -1 -1 0 256;
#X text 29 133 channels;
#X obj 101 281 t b f;
#X obj 31 314 pack 2 64 44100 4;
#X msg 31 372 format pcm \$1 \$2 \$3 \$4;
#X msg 46 433 format pcm auto 256 auto 4;
#X text 27 52 PCM gives you maximum audio quality at the cost of high
data rates and no packet loss concealment (missing packets just produce
silence)., f 71;
#X text 26 25 PCM (uncompressed);
#X text 27 87 It is a good choice for LANs or inter-app streaming \,
but for unreliable networks (like the internet) the "opus" codec should
be preferred., f 72;
#X msg 43 343 [format pcm <nchannels> <blocksize> <samplerate> <bitdepth>(
;
#X connect 1 0 5 0;
#X connect 2 0 5 0;
#X connect 3 0 5 0;
#X connect 4 0 5 0;
#X connect 5 0 29 0;
#X connect 5 1 29 3;
#X connect 6 0 9 0;
#X connect 7 0 9 0;
#X connect 8 0 9 0;
#X connect 9 0 29 0;
#X connect 9 1 29 2;
#X connect 10 0 28 0;
#X connect 11 0 28 0;
#X connect 12 0 28 0;
#X connect 13 0 28 0;
#X connect 14 0 28 0;
#X connect 15 0 9 0;
#X connect 22 0 0 0;
#X connect 26 0 29 0;
#X connect 28 0 29 0;
#X connect 28 1 29 1;
#X connect 29 0 30 0;
#X connect 30 0 0 0;
#X connect 31 0 0 0;
#X restore 99 378 pd pcm;
#N canvas 553 120 750 614 opus 0;
#X obj 37 567 outlet;
#X msg 208 201 48000;
#X obj 113 151 nbx 5 14 -1e+037 1e+037 0 0 empty empty empty 0 -8 0
10 -262144 -1 -1 0 256;
#X obj 195 151 nbx 5 14 -1e+037 1e+037 0 0 empty empty empty 0 -8 0
10 -262144 -1 -1 0 256;
#X text 189 128 samplerate;
#X obj 278 151 nbx 5 14 -1e+037 1e+037 0 0 empty empty empty 0 -8 0
10 -262144 -1 -1 0 256;
#X msg 294 201 max;
#X obj 350 256 nbx 5 14 -1e+037 1e+037 0 0 empty empty empty 0 -8 0
10 -262144 -1 -1 0 256;
#X msg 50 495 format opus;
#X text 140 495 all arguments are optional!;
#X msg 287 175 auto;
#X text 344 197 complexity (0 - 10);
#X text 277 129 bitrate (bit/s);
#X msg 359 277 auto;
#X text 423 262 signal type;
#X msg 426 305 auto;
#X msg 468 306 music;
#X msg 518 307 voice;
#X obj 37 432 list prepend format opus;
#X obj 37 462 list trim;
#X text 108 129 blocksize;
#X msg 213 225 24000;
#X msg 127 200 128;
#X msg 132 225 256;
#X msg 136 249 512;
#X msg 140 273 1024;
#X msg 143 298 2048;
#X msg 120 173 auto;
#X msg 202 174 auto;
#N canvas 107 95 739 368 pack 0;
#X obj 36 40 inlet;
#X obj 101 40 inlet;
#X obj 163 41 inlet;
#X obj 232 42 inlet;
#X obj 299 44 inlet;
#X obj 162 90 t b a;
#X obj 167 308 text define \$0-opus;
#X obj 167 256 loadbang;
#X obj 68 121 text set \$0-opus 0 0;
#X obj 132 154 text set \$0-opus 0 1;
#X obj 194 181 text set \$0-opus 0 2;
#X obj 263 211 text set \$0-opus 0 3;
#X obj 331 121 text set \$0-opus 0 4;
#X obj 36 283 text get \$0-opus;
#X obj 36 311 outlet;
#X obj 36 64 list;
#X obj 101 64 list;
#X obj 163 65 list;
#X obj 232 66 list;
#X obj 299 68 list;
#X obj 36 88 t b a;
#X obj 101 90 t b a;
#X msg 36 254 0;
#X obj 232 90 t b a;
#X obj 299 92 t b a;
#X obj 378 44 inlet;
#X obj 378 68 list;
#X obj 378 92 t b a;
#X obj 410 151 text set \$0-opus 0 5;
#X msg 167 282 set auto auto auto auto auto auto auto;
#X obj 461 43 inlet;
#X obj 461 67 list;
#X obj 461 91 t b a;
#X obj 493 120 text set \$0-opus 0 6;
#X connect 0 0 15 0;
#X connect 1 0 16 0;
#X connect 2 0 17 0;
#X connect 3 0 18 0;
#X connect 4 0 19 0;
#X connect 5 0 22 0;
#X connect 5 1 10 0;
#X connect 7 0 29 0;
#X connect 13 0 14 0;
#X connect 15 0 20 0;
#X connect 16 0 21 0;
#X connect 17 0 5 0;
#X connect 18 0 23 0;
#X connect 19 0 24 0;
#X connect 20 0 22 0;
#X connect 20 1 8 0;
#X connect 21 0 22 0;
#X connect 21 1 9 0;
#X connect 22 0 13 0;
#X connect 23 0 22 0;
#X connect 23 1 11 0;
#X connect 24 0 22 0;
#X connect 24 1 12 0;
#X connect 25 0 26 0;
#X connect 26 0 27 0;
#X connect 27 0 22 0;
#X connect 27 1 28 0;
#X connect 29 0 6 0;
#X connect 30 0 31 0;
#X connect 31 0 32 0;
#X connect 32 0 22 0;
#X connect 32 1 33 0;
#X restore 37 355 pd pack;
#X f 67;
#X text 423 280 optimize for music or speech;
#X text 346 218 higher values give better quality but need more CPU
power. the default is 9, f 38;
#X text 288 529 individual arguments can be "auto";
#X msg 218 250 16000;
#X msg 222 275 12000;
#X msg 229 300 8000;
#X obj 278 326 t a, f 4;
#X obj 350 326 t a;
#X obj 426 329 t a;
#X obj 37 152 nbx 5 14 -1e+037 1e+037 0 0 empty empty empty 0 -8 0
10 -262144 -1 -1 0 256;
#X text 31 129 channels;
#X obj 113 327 t a;
#X obj 195 327 t a;
#X text 395 129 NOTE: this is the *total* bitrate!;
#X text 343 151 64000 bit/s per channel is considered to be transparent.
, f 41;
#X msg 55 529 format opus auto 512 auto 64000;
#X text 31 23 Opus codec (compressed);
#X text 31 50 Opus is a low latency codec explicitly designed for streaming
audio over the internet \, see http://opus-codec.org/, f 86;
#X text 30 86 It offers good audio quality even at low data rates and
does packet loss concealment to hide the effects of packet loss in
unreliable networks., f 85;
#X text 524 336 application type;
#X text 527 356 default is "audio";
#X msg 52 386 format opus <nchannels> <blocksize> <samplerate> <bitrate>
<complexity> <signaltype> <application>, f 52;
#X msg 527 379 auto;
#X obj 527 414 t a;
#X msg 569 380 audio;
#X msg 617 381 voip;
#X msg 659 381 lowdelay;
#X connect 1 0 42 0;
#X connect 2 0 41 0;
#X connect 3 0 42 0;
#X connect 5 0 36 0;
#X connect 6 0 36 0;
#X connect 7 0 37 0;
#X connect 8 0 0 0;
#X connect 10 0 36 0;
#X connect 13 0 37 0;
#X connect 15 0 38 0;
#X connect 16 0 38 0;
#X connect 17 0 38 0;
#X connect 18 0 19 0;
#X connect 19 0 0 0;
#X connect 21 0 42 0;
#X connect 22 0 41 0;
#X connect 23 0 41 0;
#X connect 24 0 41 0;
#X connect 25 0 41 0;
#X connect 26 0 41 0;
#X connect 27 0 41 0;
#X connect 28 0 42 0;
#X connect 29 0 18 0;
#X connect 33 0 42 0;
#X connect 34 0 42 0;
#X connect 35 0 42 0;
#X connect 36 0 29 3;
#X connect 37 0 29 4;
#X connect 38 0 29 5;
#X connect 39 0 29 0;
#X connect 41 0 29 1;
#X connect 42 0 29 2;
#X connect 45 0 0 0;
#X connect 52 0 53 0;
#X connect 53 0 29 6;
#X connect 54 0 53 0;
#X connect 55 0 53 0;
#X connect 56 0 53 0;
#X restore 154 379 pd opus;
#X text 97 354 set format:;
#X obj 83 271 nbx 5 14 -1e+037 1e+037 0 0 empty empty empty 0 -8 0
10 -262144 -1 -1 0 256;
#X obj 48 417 osc~ 440;
#X obj 152 418 osc~ 220;
#X obj 48 443 *~ 0.25;
#X obj 152 444 *~ 0.25;
#X msg 29 52 add localhost 9999 1;
#X text 26 19 aoo_send~: send an AoO audio stream to one or more AoO
sinks;
#X msg 43 109 remove localhost 9999 1;
#X text 222 108 remove an AoO sink (hostname \, port \, sink ID);
#X text 106 141 remove all AoO sinks;
#X msg 83 293 channel localhost 9999 1 \$1;
#X text 290 294 set sink channel onset;
#X text 185 52 add an AoO sink (hostname \, port \, sink ID \, [channel
onset]);
#X text 211 82 with optional channel onset;
#X msg 543 299 \; pd dsp \$1;
#X obj 543 275 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X msg 60 172 list_sinks;
#X text 147 169 list all sinks. This will output a message [sink <host>
<port> <id>( for each sink., f 44;
#X obj 29 531 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 36 82 add localhost 9999 1 1;
#X msg 77 239 stop;
#X msg 68 211 start;
#X obj 478 19 declare -lib aoo;
#X obj 29 471 aoo_send~ 9998 1 2;
#N canvas 681 50 632 660 events 0;
#X obj 37 26 inlet;
#X obj 37 120 outlet;
#X text 64 214 It also tells you the network latency:;
#X text 66 235 <delta1> is the approx. delay between source and sink
(in ms), f 62;
#X text 66 256 <delta2> is the approx. delay between sink and source
(in ms), f 62;
#X text 66 276 <rtt> is the approx. roundtrip time (in ms) \, as measured
on the source, f 71;
#X text 67 298 NOTE: The roundtrip time is not necessarily the same
as the sum of the deltas \, especially if the two clocks are not perfectly
in sync. If one clock runs significantly early or late \, the deltas
can even be negative!, f 73;
#X text 62 418 This event is only sent when auto accept is turned off
with [accept 0(., f 73;
#X text 62 514 This event is only sent when auto accept is turned off
with [accept 0(., f 73;
#X text 63 396 You may respond with [add <host> <port> <ID>( or ignore
it.;
#X text 62 491 You may respond with [remove <host> <port> <ID>( or
ignore it., f 62;
#X text 64 374 A sink invites you to send audio messages.;
#X text 64 174 A periodic message exchanged between source and sink
\, so the source knows that the sink is receiving its messages.;
#X obj 37 50 route ping, f 17;
#X obj 153 122 print aoo_send~;
#X text 62 616 A sink has been removed., f 25;
#X obj 37 75 t a a;
#X obj 153 94 spigot;
#X obj 192 73 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text 217 72 show pings;
#X text 64 469 A sink asks you to stop sending audio messages.;
#X text 62 564 A sink has been added.;
#X msg 37 152 ping <host> <port> <ID> <delta1> <delta2> <rtt>;
#X msg 37 351 invite <host> <port> <ID>;
#X msg 36 444 uninvite <host> <port> <ID>;
#X msg 33 538 sink_add <host> <port> <ID>;
#X msg 33 590 sink_remove <host> <port> <ID>;
#X connect 0 0 13 0;
#X connect 13 0 16 0;
#X connect 13 1 14 0;
#X connect 16 0 1 0;
#X connect 16 1 17 0;
#X connect 17 0 14 0;
#X connect 18 0 17 1;
#X restore 29 500 pd events;
#X text 50 529 ping;
#X text 252 212 Note: you can use these two methods to send "audio
events" instead of continuous streams., f 36;
#X text 117 212 start streaming;
#X text 123 239 stop streaming;
#X text 246 394 2) the source ID \, must be unique for all;
#X text 264 414 [aoo_send~] instances on this port.;
#X obj 121 505 aoo_send~ 9998 2 2;
#X text 262 505 another source on the same port;
#X obj 121 536 aoo_receive~ 9998 1 2;
#X text 245 440 3) number of channels (default: 1);
#X text 246 368 1) port number for incoming messages \, e.g. invitations
;
#X text 283 536 the same port can also be used by sinks;
#X msg 53 140 remove;
#N canvas 705 62 666 488 advanced 0;
#X obj 80 234 nbx 5 14 -1e+037 1e+037 0 0 empty empty empty 0 -8 0
10 -262144 -1 -1 0 256;
#X msg 80 253 packetsize \$1;
#X text 186 251 max. UDP packet size (default: 512 bytes);
#X obj 89 283 nbx 8 14 -1e+037 1e+037 0 0 empty empty empty 0 -8 0
10 -262144 -1 -1 0 256;
#X msg 89 302 timefilter \$1;
#X text 193 303 time DLL filter bandwidth (default: 0.0001);
#X obj 94 333 nbx 5 14 -1e+037 1e+037 0 0 empty empty empty 0 -8 0
10 -262144 -1 -1 0 256;
#X text 179 355 buffersize (ms) for resending lost packets (default:
1000);
#X msg 69 204 ping \$1;
#X obj 69 183 nbx 5 14 -1e+037 1e+037 0 0 empty empty empty 0 -8 0
10 -262144 -1 -1 0 256;
#X text 135 204 set ping interval in ms (default: 1000) \, 0 = off
;
#X obj 29 436 outlet;
#X msg 52 148 accept \$1;
#X obj 52 127 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text 130 130 1 (default): automatically accept all (un)invitations
from sinks., f 65;
#X text 131 151 0: (un)invitations cause a [invite( resp. [uninvite(
event which, f 64;
#X text 156 170 has to be handled manually.;
#X msg 29 48 port \$1;
#X obj 29 28 nbx 5 14 -1e+037 1e+037 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X msg 41 96 id \$1;
#X obj 41 77 nbx 5 14 -1e+037 1e+037 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X text 98 47 change receive port;
#X text 98 97 change AoO source ID;
#X msg 94 354 history \$1;
#X msg 100 406 redundancy \$1;
#X obj 100 386 nbx 5 14 -1e+037 1e+037 0 0 empty empty empty 0 -8 0
10 -262144 -1 -1 0 256;
#X text 210 388 how often each packet should be sent (default: 1);
#X text 210 410 redundancy might help to reduce packet loss - at the
cost of increased network traffic., f 44;
#X connect 0 0 1 0;
#X connect 1 0 11 0;
#X connect 3 0 4 0;
#X connect 4 0 11 0;
#X connect 6 0 23 0;
#X connect 8 0 11 0;
#X connect 9 0 8 0;
#X connect 12 0 11 0;
#X connect 13 0 12 0;
#X connect 17 0 11 0;
#X connect 18 0 17 0;
#X connect 19 0 11 0;
#X connect 20 0 19 0;
#X connect 23 0 11 0;
#X connect 24 0 11 0;
#X connect 25 0 24 0;
#X restore 97 324 pd advanced;
#X text 25 576 see also;
#X obj 98 576 aoo_receive~;
#X obj 201 576 aoo_client;
#X obj 287 576 aoo_server;
#X connect 1 0 27 0;
#X connect 2 0 27 0;
#X connect 4 0 14 0;
#X connect 5 0 7 0;
#X connect 6 0 8 0;
#X connect 7 0 27 0;
#X connect 8 0 27 1;
#X connect 9 0 27 0;
#X connect 11 0 27 0;
#X connect 14 0 27 0;
#X connect 19 0 18 0;
#X connect 20 0 27 0;
#X connect 23 0 27 0;
#X connect 24 0 27 0;
#X connect 25 0 27 0;
#X connect 27 0 28 0;
#X connect 28 0 22 0;
#X connect 41 0 27 0;
#X connect 42 0 27 0;
